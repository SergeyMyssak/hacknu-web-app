import React, { FC, memo } from 'react';
import {
  GeolocationControl,
  Map,
  Placemark,
  Polygon,
  SearchControl,
  TypeSelector,
  YMaps,
  ZoomControl,
} from 'react-yandex-maps';
import LinearProgress from '@material-ui/core/LinearProgress';

interface IProps {
  mapRef: any;
  placemarkRef: any;
  searchControlRef: any;
  mapState: any;
  zonesJson?: any;
  height?: number;
  isMapLoading: boolean;

  onClickPolygon: (e: any, zoneId: number) => void;
  onLoad: (ymaps: any) => void;
  onResultShow: () => void;
}

const a = {
  type: 'FeatureCollection',
  metadata: { name: 'Без названия', creator: 'Yandex Map Constructor' },
  features: [
    {
      type: 'Feature',
      id: 0,
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [71.33660793605625, 51.01897528156657],
            [71.4366899864676, 51.003588256243056],
            [71.46346222597722, 51.01768555598864],
            [71.47788178164144, 51.024181708765646],
            [71.47616516787177, 51.0266716580481],
            [71.50208603579186, 51.04577483762303],
            [71.54568802553804, 51.049183354375664],
            [71.55598770815499, 51.0483177232136],
            [71.57916199404347, 51.070926999782586],
            [71.61317166533756, 51.09640422412912],
            [71.52461511348712, 51.103498218833025],
            [71.51214154610528, 51.10100553806619],
            [71.49989735323571, 51.103712352478624],
            [71.48916444822059, 51.09956549522162],
            [71.47916110405833, 51.10117392299439],
            [71.47118698794027, 51.105414498493936],
            [71.45882736879956, 51.10579949897525],
            [71.45127426821367, 51.108345824483],
            [71.45033013064025, 51.11079070458653],
            [71.44948255259148, 51.115983954886794],
            [71.44597422320018, 51.120015241398036],
            [71.44599568087207, 51.121919344223386],
            [71.45061980921393, 51.12347902924755],
            [71.4521540327704, 51.12617290595519],
            [71.44771229464205, 51.130669100209225],
            [71.44475076362119, 51.13559194257121],
            [71.44165601662571, 51.14222976682008],
            [71.43972973552337, 51.14745443377989],
            [71.43408317799359, 51.14999415963279],
            [71.42822872835791, 51.151618531722804],
            [71.42183434206618, 51.1609023358502],
            [71.40811734259702, 51.15725748706398],
            [71.3998078590689, 51.159164852151484],
            [71.39528833687854, 51.16282654930291],
            [71.38656981647615, 51.16355662702904],
            [71.36321547131155, 51.16416889739167],
            [71.35743986803675, 51.16362774730436],
            [71.35553279453862, 51.165430694242254],
            [71.35319570290882, 51.166089303580726],
            [71.349613696714, 51.16779465736014],
            [71.34789414344404, 51.17002820576361],
            [71.34769955464475, 51.17083467906686],
            [71.34438360942724, 51.1727217311223],
            [71.34096610770467, 51.17412384439005],
            [71.33761297899856, 51.1743659117923],
            [71.29901062685639, 51.1722616454193],
            [71.28665100771558, 51.18391483055415],
            [71.28085743624335, 51.179814973425565],
            [71.26682411867745, 51.17441986607229],
            [71.25386368471747, 51.17528312589942],
            [71.25463616091368, 51.15801484217617],
            [71.24373566347717, 51.157583051804664],
            [71.22691284853602, 51.12259453904028],
            [71.2277711554207, 51.11297882955492],
            [71.2222779913582, 51.10271265005061],
            [71.24579560000073, 51.06811496700647],
            [71.25171791750549, 51.06735785191731],
            [71.25592362124073, 51.04972436559072],
            [71.28699433046906, 51.02179989232853],
            [71.33660793605625, 51.01897528156657],
          ],
        ],
      },
      properties: {
        description: '[51.089674,71.378138,"Есильский район"]',
        fill: '#82cdff',
        'fill-opacity': 0.6,
        stroke: '#1e98ff',
        'stroke-width': '5',
        'stroke-opacity': 0.9,
      },
    },
    {
      type: 'Feature',
      id: 1,
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [71.39367335278172, 51.20104811775522],
            [71.3745623192817, 51.20707763892496],
            [71.36689660105911, 51.210201091616774],
            [71.36426748282855, 51.212171775911514],
            [71.36308380763387, 51.21462042458417],
            [71.36265004417254, 51.216921910979124],
            [71.30248774907196, 51.23517253341148],
            [71.30137195012232, 51.23312494302523],
            [71.2829183520995, 51.23915968337864],
            [71.25922908208058, 51.24648651262347],
            [71.24515284917015, 51.22536482185997],
            [71.24618281743147, 51.22267002765822],
            [71.24086131474638, 51.215069853703824],
            [71.2403463306158, 51.20962498208611],
            [71.24137629887753, 51.20466473374513],
            [71.24549617192369, 51.198194037488285],
            [71.25339259526419, 51.191075216213854],
            [71.2729619922365, 51.18762326849214],
            [71.28720988652407, 51.18460260101063],
            [71.29939784428733, 51.173057502501756],
            [71.3384937228888, 51.17494591835615],
            [71.34475271186966, 51.17280979089688],
            [71.35896434208938, 51.1644237541896],
            [71.3740705432624, 51.164477720166424],
            [71.39449824712067, 51.16353330647709],
            [71.39638652226728, 51.16266982552516],
            [71.39801730534838, 51.160801143135494],
            [71.40014161488826, 51.15927983106269],
            [71.40794147870352, 51.15747341830774],
            [71.42186214349081, 51.161063404146205],
            [71.42890830657299, 51.1524683053174],
            [71.431062120412, 51.1537372410243],
            [71.42384461354794, 51.17713159097854],
            [71.43636816503259, 51.17872372224322],
            [71.4419257021116, 51.180328682376754],
            [71.44602411748612, 51.18436106543369],
            [71.39367335278172, 51.20104811775522],
          ],
        ],
      },
      properties: {
        description: ' [51.189169,71.356237,"Сарыаркинский район"]',
        fill: '#e6761b',
        'fill-opacity': 0.6,
        stroke: '#ed4543',
        'stroke-width': '5',
        'stroke-opacity': 0.9,
      },
    },
    {
      type: 'Feature',
      id: 2,
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [71.5116130596455, 51.10232638279037],
            [71.52584486067859, 51.104518287902295],
            [71.59751959719948, 51.100158186165416],
            [71.67797447867872, 51.086070171935766],
            [71.74351148665518, 51.1036536968217],
            [71.70622987042071, 51.112965651167144],
            [71.71289356668628, 51.13134943812864],
            [71.68845545628771, 51.1400262915807],
            [71.64369910853743, 51.14010005672861],
            [71.62147767280251, 51.18816961788035],
            [71.57970812470226, 51.20697610199249],
            [71.52355400878697, 51.17775838819687],
            [71.50461505362922, 51.18319451488969],
            [71.49016739611871, 51.1710222787172],
            [71.47418883713878, 51.164503223856464],
            [71.45889692366676, 51.15560834368612],
            [71.4471165482496, 51.1516766673602],
            [71.43996047130979, 51.14792045045261],
            [71.44636564314926, 51.13422872274235],
            [71.45316272669106, 51.126541635512645],
            [71.4515666293781, 51.123147961844815],
            [71.44673453836327, 51.120532740780334],
            [71.45071287914735, 51.114768278524494],
            [71.4555495268162, 51.109543401700115],
            [71.47430353224834, 51.10632847283035],
            [71.48574047148784, 51.10234326997821],
            [71.49961285651287, 51.10445749687817],
            [71.5116130596455, 51.10232638279037],
          ],
        ],
      },
      properties: {
        description: '[51.152252,71.562212,"Алматинский район"]',
        fill: '#1bad03',
        'fill-opacity': 0.6,
        stroke: '#1bad03',
        'stroke-width': '5',
        'stroke-opacity': 0.9,
      },
    },
    {
      type: 'Feature',
      id: 3,
      geometry: {
        type: 'Polygon',
        coordinates: [
          [
            [71.37384144496824, 51.208244427151364],
            [71.44674306117149, 51.184607658794235],
            [71.44191508494468, 51.17984700705663],
            [71.43682229644331, 51.17856449351815],
            [71.42401938639732, 51.17702814460944],
            [71.43172791166648, 51.154112168759546],
            [71.43007306042406, 51.15197047896397],
            [71.4394045373067, 51.14896495040205],
            [71.45782820232291, 51.155984709921725],
            [71.475481375308, 51.16575213778075],
            [71.4887711576013, 51.17155236081779],
            [71.50472169123742, 51.184203090046346],
            [71.52343278132531, 51.17864665140361],
            [71.58060261842294, 51.20843831138865],
            [71.56480977174326, 51.23258551535625],
            [71.6132182800441, 51.25650455708308],
            [71.6029185974269, 51.268136326545125],
            [71.55253598329112, 51.238660735845976],
            [71.55124852296397, 51.243011229652666],
            [71.4721126281886, 51.26334396515355],
            [71.49786183473154, 51.28374840104478],
            [71.49889180299331, 51.29009937384988],
            [71.4772839271693, 51.28573990279351],
            [71.45086953279063, 51.2706130804636],
            [71.42893979188487, 51.27395110167788],
            [71.39949986573738, 51.26770557303723],
            [71.38868519898939, 51.30215302908829],
            [71.35675618287613, 51.29913991353169],
            [71.3664550506739, 51.27072076237185],
            [71.336929293838, 51.268028638552174],
            [71.3031978332667, 51.23581854904135],
            [71.36357642332382, 51.2179694724465],
            [71.3652699297782, 51.21357083540682],
            [71.36775324291517, 51.21042250429878],
            [71.37384144496824, 51.208244427151364],
          ],
        ],
      },
      properties: {
        description: '[51.167685,71.449518,"Байконурский район"]',
        fill: '#177bc9',
        'fill-opacity': 0.6,
        stroke: '#0e4779',
        'stroke-width': '5',
        'stroke-opacity': 0.9,
      },
    },
  ],
};

const SelectAddressMapView: FC<IProps> = ({
  mapRef,
  placemarkRef,
  searchControlRef,
  mapState,
  zonesJson = a,
  // zonesJson = {"type":"FeatureCollection","metadata":{"name":"Без названия","creator":"Yandex Map Constructor"},"features":[{"type":"Feature","id":0,"geometry":{"type":"Polygon","coordinates":[[[71.33660793605625,51.01897528156657],[71.4366899864676,51.003588256243056],[71.46346222597722,51.01768555598864],[71.47788178164144,51.024181708765646],[71.47616516787177,51.0266716580481],[71.50208603579186,51.04577483762303],[71.54568802553804,51.049183354375664],[71.55598770815499,51.0483177232136],[71.57916199404347,51.070926999782586],[71.61317166533756,51.09640422412912],[71.52461511348712,51.103498218833025],[71.51214154610528,51.10100553806619],[71.49989735323571,51.103712352478624],[71.48916444822059,51.09956549522162],[71.47916110405833,51.10117392299439],[71.47118698794027,51.105414498493936],[71.45882736879956,51.10579949897525],[71.45127426821367,51.108345824483],[71.45033013064025,51.11079070458653],[71.44948255259148,51.115983954886794],[71.44597422320018,51.120015241398036],[71.44599568087207,51.121919344223386],[71.45061980921393,51.12347902924755],[71.4521540327704,51.12617290595519],[71.44771229464205,51.130669100209225],[71.44475076362119,51.13559194257121],[71.44165601662571,51.14222976682008],[71.43972973552337,51.14745443377989],[71.43408317799359,51.14999415963279],[71.42822872835791,51.151618531722804],[71.42183434206618,51.1609023358502],[71.40811734259702,51.15725748706398],[71.3998078590689,51.159164852151484],[71.39528833687854,51.16282654930291],[71.38656981647615,51.16355662702904],[71.36321547131155,51.16416889739167],[71.35743986803675,51.16362774730436],[71.35553279453862,51.165430694242254],[71.35319570290882,51.166089303580726],[71.349613696714,51.16779465736014],[71.34789414344404,51.17002820576361],[71.34769955464475,51.17083467906686],[71.34438360942724,51.1727217311223],[71.34096610770467,51.17412384439005],[71.33761297899856,51.1743659117923],[71.29901062685639,51.1722616454193],[71.28665100771558,51.18391483055415],[71.28085743624335,51.179814973425565],[71.26682411867745,51.17441986607229],[71.25386368471747,51.17528312589942],[71.25463616091368,51.15801484217617],[71.24373566347717,51.157583051804664],[71.22691284853602,51.12259453904028],[71.2277711554207,51.11297882955492],[71.2222779913582,51.10271265005061],[71.24579560000073,51.06811496700647],[71.25171791750549,51.06735785191731],[71.25592362124073,51.04972436559072],[71.28699433046906,51.02179989232853],[71.33660793605625,51.01897528156657]]]},"properties":{"description":"[51.089674,71.378138,\"Есильский район\"]","fill":"#82cdff","fill-opacity":0.6,"stroke":"#1e98ff","stroke-width":"5","stroke-opacity":0.9}},{"type":"Feature","id":1,"geometry":{"type":"Polygon","coordinates":[[[71.39367335278172,51.20104811775522],[71.3745623192817,51.20707763892496],[71.36689660105911,51.210201091616774],[71.36426748282855,51.212171775911514],[71.36308380763387,51.21462042458417],[71.36265004417254,51.216921910979124],[71.30248774907196,51.23517253341148],[71.30137195012232,51.23312494302523],[71.2829183520995,51.23915968337864],[71.25922908208058,51.24648651262347],[71.24515284917015,51.22536482185997],[71.24618281743147,51.22267002765822],[71.24086131474638,51.215069853703824],[71.2403463306158,51.20962498208611],[71.24137629887753,51.20466473374513],[71.24549617192369,51.198194037488285],[71.25339259526419,51.191075216213854],[71.2729619922365,51.18762326849214],[71.28720988652407,51.18460260101063],[71.29939784428733,51.173057502501756],[71.3384937228888,51.17494591835615],[71.34475271186966,51.17280979089688],[71.35896434208938,51.1644237541896],[71.3740705432624,51.164477720166424],[71.39449824712067,51.16353330647709],[71.39638652226728,51.16266982552516],[71.39801730534838,51.160801143135494],[71.40014161488826,51.15927983106269],[71.40794147870352,51.15747341830774],[71.42186214349081,51.161063404146205],[71.42890830657299,51.1524683053174],[71.431062120412,51.1537372410243],[71.42384461354794,51.17713159097854],[71.43636816503259,51.17872372224322],[71.4419257021116,51.180328682376754],[71.44602411748612,51.18436106543369],[71.39367335278172,51.20104811775522]]]},"properties":{"description":" [51.189169,71.356237,\"Сарыаркинский район\"]","fill":"#e6761b","fill-opacity":0.6,"stroke":"#ed4543","stroke-width":"5","stroke-opacity":0.9}},{"type":"Feature","id":2,"geometry":{"type":"Polygon","coordinates":[[[71.5116130596455,51.10232638279037],[71.52584486067859,51.104518287902295],[71.59751959719948,51.100158186165416],[71.67797447867872,51.086070171935766],[71.74351148665518,51.1036536968217],[71.70622987042071,51.112965651167144],[71.71289356668628,51.13134943812864],[71.68845545628771,51.1400262915807],[71.64369910853743,51.14010005672861],[71.62147767280251,51.18816961788035],[71.57970812470226,51.20697610199249],[71.52355400878697,51.17775838819687],[71.50461505362922,51.18319451488969],[71.49016739611871,51.1710222787172],[71.47418883713878,51.164503223856464],[71.45889692366676,51.15560834368612],[71.4471165482496,51.1516766673602],[71.43996047130979,51.14792045045261],[71.44636564314926,51.13422872274235],[71.45316272669106,51.126541635512645],[71.4515666293781,51.123147961844815],[71.44673453836327,51.120532740780334],[71.45071287914735,51.114768278524494],[71.4555495268162,51.109543401700115],[71.47430353224834,51.10632847283035],[71.48574047148784,51.10234326997821],[71.49961285651287,51.10445749687817],[71.5116130596455,51.10232638279037]]]},"properties":{"description":"[51.152252,71.562212,\"Алматинский район\"]","fill":"#1bad03","fill-opacity":0.6,"stroke":"#1bad03","stroke-width":"5","stroke-opacity":0.9}},{"type":"Feature","id":3,"geometry":{"type":"Polygon","coordinates":[[[71.37384144496824,51.208244427151364],[71.44674306117149,51.184607658794235],[71.44191508494468,51.17984700705663],[71.43682229644331,51.17856449351815],[71.42401938639732,51.17702814460944],[71.43172791166648,51.154112168759546],[71.43007306042406,51.15197047896397],[71.4394045373067,51.14896495040205],[71.45782820232291,51.155984709921725],[71.475481375308,51.16575213778075],[71.4887711576013,51.17155236081779],[71.50472169123742,51.184203090046346],[71.52343278132531,51.17864665140361],[71.58060261842294,51.20843831138865],[71.56480977174326,51.23258551535625],[71.6132182800441,51.25650455708308],[71.6029185974269,51.268136326545125],[71.55253598329112,51.238660735845976],[71.55124852296397,51.243011229652666],[71.4721126281886,51.26334396515355],[71.49786183473154,51.28374840104478],[71.49889180299331,51.29009937384988],[71.4772839271693,51.28573990279351],[71.45086953279063,51.2706130804636],[71.42893979188487,51.27395110167788],[71.39949986573738,51.26770557303723],[71.38868519898939,51.30215302908829],[71.35675618287613,51.29913991353169],[71.3664550506739,51.27072076237185],[71.336929293838,51.268028638552174],[71.3031978332667,51.23581854904135],[71.36357642332382,51.2179694724465],[71.3652699297782,51.21357083540682],[71.36775324291517,51.21042250429878],[71.37384144496824,51.208244427151364]]]},"properties":{"description":"[51.167685,71.449518,\"Байконурский район\"]","fill":"#177bc9","fill-opacity":0.6,"stroke":"#0e4779","stroke-width":"5","stroke-opacity":0.9}}]},
  height = 420,
  // zonesJson = '',
  isMapLoading,

  onClickPolygon,
  onLoad,
  onResultShow,
}): JSX.Element => {
  const renderPolygon = (item: any): JSX.Element => {
    const { id, properties } = item;
    const { description } = properties;
    const onClick = (e: any) =>
      onClickPolygon(e, description.replace(/[^0-9]+/g, ''));

    return (
      <Polygon
        key={id.toString()}
        {...item}
        options={{ fillOpacity: 0.1 }}
        onClick={onClick}
      />
    );
  };

  // const zonesJson2 =
  //   '{"type":"FeatureCollection","metadata":{"name":"Без названия","creator":"Yandex Map Constructor"},"features":[{"type":"Feature","id":0,"geometry":{"type":"Polygon","coordinates":[[[71.33660793605625,51.01897528156657],[71.4366899864676,51.003588256243056],[71.46346222597722,51.01768555598864],[71.47788178164144,51.024181708765646],[71.47616516787177,51.0266716580481],[71.50208603579186,51.04577483762303],[71.54568802553804,51.049183354375664],[71.55598770815499,51.0483177232136],[71.57916199404347,51.070926999782586],[71.61317166533756,51.09640422412912],[71.52461511348712,51.103498218833025],[71.51214154610528,51.10100553806619],[71.49989735323571,51.103712352478624],[71.48916444822059,51.09956549522162],[71.47916110405833,51.10117392299439],[71.47118698794027,51.105414498493936],[71.45882736879956,51.10579949897525],[71.45127426821367,51.108345824483],[71.45033013064025,51.11079070458653],[71.44948255259148,51.115983954886794],[71.44597422320018,51.120015241398036],[71.44599568087207,51.121919344223386],[71.45061980921393,51.12347902924755],[71.4521540327704,51.12617290595519],[71.44771229464205,51.130669100209225],[71.44475076362119,51.13559194257121],[71.44165601662571,51.14222976682008],[71.43972973552337,51.14745443377989],[71.43408317799359,51.14999415963279],[71.42822872835791,51.151618531722804],[71.42183434206618,51.1609023358502],[71.40811734259702,51.15725748706398],[71.3998078590689,51.159164852151484],[71.39528833687854,51.16282654930291],[71.38656981647615,51.16355662702904],[71.36321547131155,51.16416889739167],[71.35743986803675,51.16362774730436],[71.35553279453862,51.165430694242254],[71.35319570290882,51.166089303580726],[71.349613696714,51.16779465736014],[71.34789414344404,51.17002820576361],[71.34769955464475,51.17083467906686],[71.34438360942724,51.1727217311223],[71.34096610770467,51.17412384439005],[71.33761297899856,51.1743659117923],[71.29901062685639,51.1722616454193],[71.28665100771558,51.18391483055415],[71.28085743624335,51.179814973425565],[71.26682411867745,51.17441986607229],[71.25386368471747,51.17528312589942],[71.25463616091368,51.15801484217617],[71.24373566347717,51.157583051804664],[71.22691284853602,51.12259453904028],[71.2277711554207,51.11297882955492],[71.2222779913582,51.10271265005061],[71.24579560000073,51.06811496700647],[71.25171791750549,51.06735785191731],[71.25592362124073,51.04972436559072],[71.28699433046906,51.02179989232853],[71.33660793605625,51.01897528156657]]]},"properties":{"description":"[51.089674,71.378138,"Есильский район"]","fill":"#82cdff","fill-opacity":0.6,"stroke":"#1e98ff","stroke-width":"5","stroke-opacity":0.9}},{"type":"Feature","id":1,"geometry":{"type":"Polygon","coordinates":[[[71.39367335278172,51.20104811775522],[71.3745623192817,51.20707763892496],[71.36689660105911,51.210201091616774],[71.36426748282855,51.212171775911514],[71.36308380763387,51.21462042458417],[71.36265004417254,51.216921910979124],[71.30248774907196,51.23517253341148],[71.30137195012232,51.23312494302523],[71.2829183520995,51.23915968337864],[71.25922908208058,51.24648651262347],[71.24515284917015,51.22536482185997],[71.24618281743147,51.22267002765822],[71.24086131474638,51.215069853703824],[71.2403463306158,51.20962498208611],[71.24137629887753,51.20466473374513],[71.24549617192369,51.198194037488285],[71.25339259526419,51.191075216213854],[71.2729619922365,51.18762326849214],[71.28720988652407,51.18460260101063],[71.29939784428733,51.173057502501756],[71.3384937228888,51.17494591835615],[71.34475271186966,51.17280979089688],[71.35896434208938,51.1644237541896],[71.3740705432624,51.164477720166424],[71.39449824712067,51.16353330647709],[71.39638652226728,51.16266982552516],[71.39801730534838,51.160801143135494],[71.40014161488826,51.15927983106269],[71.40794147870352,51.15747341830774],[71.42186214349081,51.161063404146205],[71.42890830657299,51.1524683053174],[71.431062120412,51.1537372410243],[71.42384461354794,51.17713159097854],[71.43636816503259,51.17872372224322],[71.4419257021116,51.180328682376754],[71.44602411748612,51.18436106543369],[71.39367335278172,51.20104811775522]]]},"properties":{"description":" [51.189169,71.356237,"Сарыаркинский район"]","fill":"#e6761b","fill-opacity":0.6,"stroke":"#ed4543","stroke-width":"5","stroke-opacity":0.9}},{"type":"Feature","id":2,"geometry":{"type":"Polygon","coordinates":[[[71.5116130596455,51.10232638279037],[71.52584486067859,51.104518287902295],[71.59751959719948,51.100158186165416],[71.67797447867872,51.086070171935766],[71.74351148665518,51.1036536968217],[71.70622987042071,51.112965651167144],[71.71289356668628,51.13134943812864],[71.68845545628771,51.1400262915807],[71.64369910853743,51.14010005672861],[71.62147767280251,51.18816961788035],[71.57970812470226,51.20697610199249],[71.52355400878697,51.17775838819687],[71.50461505362922,51.18319451488969],[71.49016739611871,51.1710222787172],[71.47418883713878,51.164503223856464],[71.45889692366676,51.15560834368612],[71.4471165482496,51.1516766673602],[71.43996047130979,51.14792045045261],[71.44636564314926,51.13422872274235],[71.45316272669106,51.126541635512645],[71.4515666293781,51.123147961844815],[71.44673453836327,51.120532740780334],[71.45071287914735,51.114768278524494],[71.4555495268162,51.109543401700115],[71.47430353224834,51.10632847283035],[71.48574047148784,51.10234326997821],[71.49961285651287,51.10445749687817],[71.5116130596455,51.10232638279037]]]},"properties":{"description":"[51.152252,71.562212,"Алматинский район"]","fill":"#1bad03","fill-opacity":0.6,"stroke":"#1bad03","stroke-width":"5","stroke-opacity":0.9}},{"type":"Feature","id":3,"geometry":{"type":"Polygon","coordinates":[[[71.37384144496824,51.208244427151364],[71.44674306117149,51.184607658794235],[71.44191508494468,51.17984700705663],[71.43682229644331,51.17856449351815],[71.42401938639732,51.17702814460944],[71.43172791166648,51.154112168759546],[71.43007306042406,51.15197047896397],[71.4394045373067,51.14896495040205],[71.45782820232291,51.155984709921725],[71.475481375308,51.16575213778075],[71.4887711576013,51.17155236081779],[71.50472169123742,51.184203090046346],[71.52343278132531,51.17864665140361],[71.58060261842294,51.20843831138865],[71.56480977174326,51.23258551535625],[71.6132182800441,51.25650455708308],[71.6029185974269,51.268136326545125],[71.55253598329112,51.238660735845976],[71.55124852296397,51.243011229652666],[71.4721126281886,51.26334396515355],[71.49786183473154,51.28374840104478],[71.49889180299331,51.29009937384988],[71.4772839271693,51.28573990279351],[71.45086953279063,51.2706130804636],[71.42893979188487,51.27395110167788],[71.39949986573738,51.26770557303723],[71.38868519898939,51.30215302908829],[71.35675618287613,51.29913991353169],[71.3664550506739,51.27072076237185],[71.336929293838,51.268028638552174],[71.3031978332667,51.23581854904135],[71.36357642332382,51.2179694724465],[71.3652699297782,51.21357083540682],[71.36775324291517,51.21042250429878],[71.37384144496824,51.208244427151364]]]},"properties":{"description":"[51.167685,71.449518,"Байконурский район"]","fill":"#177bc9","fill-opacity":0.6,"stroke":"#0e4779","stroke-width":"5","stroke-opacity":0.9}}]}';

  // console.log(JSON.parse(zonesJson2));

  return (
    <>
      {isMapLoading && <LinearProgress />}
      <YMaps
        key="address-map"
        query={{
          lang: 'en_US',
          ns: 'ymaps',
          apikey: '90d2169c-2c21-41d4-a80a-9f1120fce659',
          coordorder: 'longlat',
        }}
      >
        <Map
          instanceRef={mapRef}
          state={mapState}
          width={'100%'}
          height={height}
          modules={['geocode']}
          onLoad={onLoad}
        >
          <SearchControl
            instanceRef={searchControlRef}
            options={{ fitMaxWidth: true, noPlacemark: true, zoom: 20 }}
            onResultShow={onResultShow}
          />
          <GeolocationControl />
          <ZoomControl />
          <TypeSelector />
          <Placemark
            instanceRef={placemarkRef}
            options={{ iconColor: '#F45905' }}
          />
          {zonesJson && zonesJson.features.map(renderPolygon)}
        </Map>
      </YMaps>
    </>
  );
};

export default memo(SelectAddressMapView);
